# 解析各种协议

## url

==parse_url==

(PHP 4, PHP 5, PHP 7, PHP 8)

parse_url — 解析 URL，返回其组成部分

### 说明[ ¶](https://www.php.net/manual/zh/function.parse-url.php#refsect1-function.parse-url-description)

parse_url ( string `$url` , int `$component` = -1 ) : [mixed](https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed)

本函数解析一个 URL 并返回一个关联数组，包含在 URL 中出现的各种组成部分。

本函数*不是*用来验证给定 URL 的合法性的，只是将其分解为下面列出的部分。不完整的 URL 也被接受，**parse_url()** 会尝试尽量正确地将其解析。

### 参数[ ¶](https://www.php.net/manual/zh/function.parse-url.php#refsect1-function.parse-url-parameters)

- `url`

  要解析的 URL。无效字符将使用 `_` 来替换。

- `component`

  指定 **`PHP_URL_SCHEME`**、 **`PHP_URL_HOST`**、 **`PHP_URL_PORT`**、 **`PHP_URL_USER`**、 **`PHP_URL_PASS`**、 **`PHP_URL_PATH`**、 **`PHP_URL_QUERY`** 或 **`PHP_URL_FRAGMENT`** 的其中一个来获取 URL 中指定的部分的 string。 （除了指定为 **`PHP_URL_PORT`** 后，将返回一个 integer 的值）。

### 返回值[ ¶](https://www.php.net/manual/zh/function.parse-url.php#refsect1-function.parse-url-returnvalues)

对严重不合格的 URL，**parse_url()** 可能会返回 **`false`**。

如果省略了 `component` 参数，将返回一个关联数组 array，在目前至少会有一个元素在该数组中。数组中可能的键有以下几种：

- scheme - 如 http
- host
- port
- user
- pass
- path
- query - 在问号 `?` 之后
- fragment - 在散列符号 `#` 之后

如果指定了 `component` 参数， **parse_url()** 返回一个 string （或在指定为 **`PHP_URL_PORT`** 时返回一个 integer）而不是 array。如果 URL 中指定的组成部分不存在，将会返回 **`null`**。



## 文件路径

==pathinfo==

(PHP 4 >= 4.0.3, PHP 5, PHP 7, PHP 8)

pathinfo — 返回文件路径的信息

### 说明[ ¶](https://www.php.net/manual/zh/function.pathinfo.php#refsect1-function.pathinfo-description)

pathinfo ( string `$path` , int `$options` = PATHINFO_DIRNAME | PATHINFO_BASENAME | PATHINFO_EXTENSION | PATHINFO_FILENAME ) : [mixed](https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed)

**pathinfo()** 返回一个关联数组包含有 `path` 的信息。返回关联数组还是字符串取决于 `options`。

### 参数[ ¶](https://www.php.net/manual/zh/function.pathinfo.php#refsect1-function.pathinfo-parameters)

- `path`

  要解析的路径。

- `options`

  如果指定了，将会返回指定元素；它们包括：**`PATHINFO_DIRNAME`**，**`PATHINFO_BASENAME`** 和 **`PATHINFO_EXTENSION`** 或 **`PATHINFO_FILENAME`**。如果没有指定 `options` 默认是返回全部的单元。

### 返回值[ ¶](https://www.php.net/manual/zh/function.pathinfo.php#refsect1-function.pathinfo-returnvalues)

如果没有传入 `options` ，将会返回包括以下单元的数组 array：`dirname`，`basename` 和 `extension`（如果有），以 及`filename`。

> **注意**:
>
> If the `path` does not have an extension, no `extension` element will be returned（以下第二个案例）。



## 文件内容

==finfo_buffer==

==finfo::buffer==

(PHP 5 >= 5.3.0, PHP 7, PHP 8, PECL fileinfo >= 0.1.0)

finfo_buffer -- finfo::buffer — 返回一个字符串缓冲区的信息

### 说明[ ¶](https://www.php.net/manual/zh/function.finfo-buffer.php#refsect1-function.finfo-buffer-description)

过程化风格

[finfo_buffer](https://www.php.net/manual/zh/finfo.buffer.php) ( resource `$finfo` , string `$string` = **`null`** , int `$options` = FILEINFO_NONE , resource `$context` = **`null`** ) : string

面向对象风格

public [finfo::buffer](https://www.php.net/manual/zh/finfo.buffer.php) ( string `$string` = **`null`** , int `$options` = FILEINFO_NONE , resource `$context` = **`null`** ) : string

本函数用来获取字符串中二进制数据的信息。

### 参数[ ¶](https://www.php.net/manual/zh/function.finfo-buffer.php#refsect1-function.finfo-buffer-parameters)

- `finfo`

  [finfo_open()](https://www.php.net/manual/zh/function.finfo-open.php) 函数返回的 Fileinfo 资源。

- `string`

  要检查的文件内容。

- [options](###options)

  一个 [Fileinfo 常量 ](https://www.php.net/manual/zh/fileinfo.constants.php)或多个 [Fileinfo 常量 ](https://www.php.net/manual/zh/fileinfo.constants.php)进行逻辑或运算。

- `context`

  

### 返回值[ ¶](https://www.php.net/manual/zh/function.finfo-buffer.php#refsect1-function.finfo-buffer-returnvalues)

返回 `string` 参数所指定内容的类型描述。 发生错误时返回 **`false`** 。



### options

**`FILEINFO_NONE`** (integer)

无特殊处理。

**`FILEINFO_SYMLINK`** (integer)

跟随符号链接。

**`FILEINFO_MIME_TYPE`** (integer)

返回 mime 类型。 自 PHP 5.3.0 可用。

**`FILEINFO_MIME_ENCODING`** (integer)

返回文件的 mime 编码。 自 PHP 5.3.0 可用。

**`FILEINFO_MIME`** (integer)

按照 RFC 2045 定义的格式返回文件 mime 类型和编码。

**`FILEINFO_COMPRESS`** (integer)

解压缩压缩文件。 由于线程安全问题，自 PHP 5.3.0 禁用。

**`FILEINFO_DEVICES`** (integer)

查看设备的块内容或字符。

**`FILEINFO_CONTINUE`** (integer)

返回全部匹配的类型。

**`FILEINFO_PRESERVE_ATIME`** (integer)

如果可以的话，尽可能保持原始的访问时间。

**`FILEINFO_RAW`** (integer)

对于不可打印字符不转换成 `\ooo` 八进制表示格式。

**`FILEINFO_EXTENSION`** (integer)

根据 MIME 类型返回适当的文件扩展名。 有的文件类型具有多种扩展名，例如 `JPEG` 将会返回多个扩展名， 以斜杠分隔，比如 `"jpeg/jpg/jpe/jfif"`。 如果在 magic.mime 数据库里类型未知，则返回的是 `"???"`。 PHP 7.2.0 起有效。



